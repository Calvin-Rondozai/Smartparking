<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartPark Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" id="mobileNavToggle">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="dashboard-container">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <i class="fas fa-parking"></i>
            <span>SmartPark</span>
          </div>
          <div class="status-badge">
            <span class="status-dot"></span>
            Live
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="#dashboard" class="nav-item active" data-section="dashboard">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
          </a>
          <a href="#devices" class="nav-item" data-section="devices">
            <i class="fas fa-microchip"></i>
            <span>Devices</span>
          </a>
          <a href="#bookings" class="nav-item" data-section="bookings">
            <i class="fas fa-calendar-check"></i>
            <span>Bookings</span>
          </a>
          <a href="#users" class="nav-item" data-section="users">
            <i class="fas fa-users"></i>
            <span>Users</span>
          </a>
          <a href="#alerts" class="nav-item" data-section="alerts">
            <i class="fas fa-bell"></i>
            <span>Alerts</span>
          </a>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Top Bar -->
        <header class="top-bar">
          <div class="top-bar-left">
            <h1 id="page-title">Dashboard</h1>
            <p id="page-subtitle">Real-time parking system overview</p>
          </div>
          <div class="top-bar-right">
            <div class="admin-menu">
              <div class="admin-avatar" id="adminAvatar">A</div>
              <span id="adminName">Admin</span>
              <i class="fas fa-chevron-down"></i>
              <div
                class="admin-dropdown"
                style="
                  display: none;
                  position: absolute;
                  top: 100%;
                  right: 0;
                  background: white;
                  border-radius: 8px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                  min-width: 150px;
                  z-index: 1000;
                "
              >
                <a
                  href="#"
                  onclick="dashboard.logout()"
                  style="
                    display: block;
                    padding: 12px 16px;
                    color: var(--dark-gray);
                    text-decoration: none;
                    border-bottom: 1px solid var(--light-gray);
                  "
                >
                  <i class="fas fa-sign-out-alt" style="margin-right: 8px"></i
                  >Logout
                </a>
              </div>
            </div>
          </div>
        </header>

        <!-- Bookings Section -->
        <section id="bookings" class="content-section">
          <!-- Booking Filters -->
          <div
            class="booking-filters"
            style="
              margin-bottom: 24px;
              padding: 20px;
              background: white;
              border-radius: 12px;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            "
          >
            <div
              style="
                display: flex;
                gap: 16px;
                align-items: center;
                flex-wrap: wrap;
                justify-content: space-between;
              "
            >
              <div
                style="
                  display: flex;
                  gap: 16px;
                  align-items: center;
                  flex-wrap: wrap;
                "
              >
                <div style="display: flex; gap: 8px; align-items: center">
                  <label style="font-weight: 600; color: var(--dark-gray)"
                    >Status:</label
                  >
                  <select
                    id="bookingStatusFilter"
                    onchange="dashboard.filterBookings()"
                    style="
                      padding: 8px 12px;
                      border: 1px solid var(--light-gray);
                      border-radius: 6px;
                    "
                  >
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </div>
                <div style="display: flex; gap: 8px; align-items: center">
                  <label style="font-weight: 600; color: var(--dark-gray)"
                    >Slot:</label
                  >
                  <select
                    id="bookingSlotFilter"
                    onchange="dashboard.filterBookings()"
                    style="
                      padding: 8px 12px;
                      border: 1px solid var(--light-gray);
                      border-radius: 6px;
                    "
                  >
                    <option value="">All Slots</option>
                  </select>
                </div>
                <div style="display: flex; gap: 8px; align-items: center">
                  <label style="font-weight: 600; color: var(--dark-gray)"
                    >Search:</label
                  >
                  <input
                    type="text"
                    id="bookingSearchFilter"
                    placeholder="Search by user, number plate, or booking ID"
                    onkeyup="dashboard.filterBookings()"
                    style="
                      padding: 8px 12px;
                      border: 1px solid var(--light-gray);
                      border-radius: 6px;
                      min-width: 250px;
                    "
                  />
                </div>
                <button
                  class="btn btn-outline"
                  onclick="dashboard.clearBookingFilters()"
                >
                  <i class="fas fa-times"></i> Clear Filters
                </button>
              </div>
              <button
                class="btn btn-primary"
                onclick="dashboard.loadAllBookings()"
              >
                <i class="fas fa-sync-alt"></i> Refresh
              </button>
            </div>
          </div>

          <!-- Bookings Table -->
          <div
            class="bookings-table-container"
            style="
              background: var(--white);
              border-radius: var(--radius-md);
              box-shadow: var(--shadow-sm);
              overflow: hidden;
            "
          >
            <div
              class="table-header"
              style="
                padding: 20px;
                border-bottom: 1px solid var(--light-gray);
                background: var(--light-gray);
              "
            >
              <h3 style="margin: 0; color: var(--black)">All Bookings</h3>
              <div style="display: flex; gap: 12px; align-items: center">
                <span
                  id="bookingsCount"
                  style="color: var(--gray); font-size: 14px"
                  >Loading...</span
                >
                <button
                  class="btn btn-sm btn-outline"
                  onclick="dashboard.exportBookings()"
                >
                  <i class="fas fa-download"></i>
                  Export
                </button>
              </div>
            </div>

            <div id="bookingsTable" style="overflow-x: auto">
              <!-- Bookings table will be populated by JavaScript -->
            </div>
          </div>
        </section>

        <!-- Devices Section -->
        <section id="devices" class="content-section">
          <div class="devices-container">
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 20px;
              "
            >
              <!-- WiFi Connection Info Card -->
              <div
                style="
                  background: white;
                  border-radius: 12px;
                  box-shadow: var(--shadow-sm);
                "
              >
                <div
                  style="
                    padding: 20px;
                    border-bottom: 1px solid var(--light-gray);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                  "
                >
                  <i class="fas fa-wifi" style="color: var(--blue)"></i>
                  <h3 style="margin: 0; color: var(--dark-gray)">
                    WiFi Connection Info
                  </h3>
                </div>
                <div style="padding: 20px">
                  <div
                    style="
                      display: grid;
                      grid-template-columns: 140px 1fr;
                      row-gap: 10px;
                      column-gap: 12px;
                    "
                  >
                    <div style="color: var(--gray)">SSID</div>
                    <div style="font-weight: 600; color: var(--black)">
                      Hello_C1
                    </div>
                    <div style="color: var(--gray)">IP Address</div>
                    <div style="font-weight: 600; color: var(--black)">
                      10.38.47.70
                    </div>
                    <div style="color: var(--gray)">MAC Address</div>
                    <div style="font-weight: 600; color: var(--black)">
                      14:33:5C:47:E0:7C
                    </div>
                    <div style="color: var(--gray)">Signal Strength</div>
                    <div style="font-weight: 600; color: var(--black)">
                      -56 dBm
                    </div>
                    <div style="color: var(--gray)">Channel</div>
                    <div style="font-weight: 600; color: var(--black)">6</div>
                  </div>
                </div>
              </div>

              <!-- System Info Card -->
              <div
                style="
                  background: white;
                  border-radius: 12px;
                  box-shadow: var(--shadow-sm);
                "
              >
                <div
                  style="
                    padding: 20px;
                    border-bottom: 1px solid var(--light-gray);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                  "
                >
                  <i
                    class="fas fa-microchip"
                    style="color: var(--primary-green)"
                  ></i>
                  <h3 style="margin: 0; color: var(--dark-gray)">
                    System Info
                  </h3>
                </div>
                <div style="padding: 20px">
                  <div
                    style="
                      display: grid;
                      grid-template-columns: 160px 1fr;
                      row-gap: 10px;
                      column-gap: 12px;
                    "
                  >
                    <div style="color: var(--gray)">SDK Version</div>
                    <div style="font-weight: 600; color: var(--black)">
                      v5.4.2-25-g858a988d6e
                    </div>
                    <div style="color: var(--gray)">Chip Revision</div>
                    <div style="font-weight: 600; color: var(--black)">301</div>
                    <div style="color: var(--gray)">Flash Size</div>
                    <div style="font-weight: 600; color: var(--black)">
                      4 MB
                    </div>
                    <div style="color: var(--gray)">CPU Frequency</div>
                    <div style="font-weight: 600; color: var(--black)">
                      240 MHz
                    </div>
                    <div style="color: var(--gray)">Sketch Size</div>
                    <div style="font-weight: 600; color: var(--black)">
                      1025 KB
                    </div>
                    <div style="color: var(--gray)">Free Heap</div>
                    <div style="font-weight: 600; color: var(--black)">
                      231448 bytes
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Users Section -->
        <section id="users" class="content-section">
          <div class="users-container"></div>
        </section>

        <!-- Alerts Section -->
        <section id="alerts" class="content-section">
          <div class="alerts-container">
            <div class="alerts-list"></div>
          </div>
        </section>

        <!-- Dashboard (renamed from Reports) -->
        <section id="dashboard" class="content-section active">
          <div class="reports-container">
            <!-- Key Metrics Cards -->
            <div
              class="metrics-grid"
              style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
                margin-bottom: 24px;
              "
            >
              <div
                class="metric-card"
                style="
                  background: white;
                  padding: 16px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: var(--primary-green);
                    margin-bottom: 6px;
                  "
                  id="totalRevenue"
                >
                  $0
                </div>
                <div style="color: var(--gray); font-size: 13px">
                  Total Revenue
                </div>
                <div
                  style="
                    color: var(--success-green);
                    font-size: 11px;
                    margin-top: 2px;
                  "
                  id="revenueChange"
                ></div>
              </div>
              <div
                class="metric-card"
                style="
                  background: white;
                  padding: 16px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: var(--blue);
                    margin-bottom: 6px;
                  "
                  id="totalBookings"
                >
                  0
                </div>
                <div style="color: var(--gray); font-size: 13px">
                  Total Bookings
                </div>
                <div
                  style="
                    color: var(--success-green);
                    font-size: 11px;
                    margin-top: 2px;
                  "
                  id="bookingsChange"
                ></div>
              </div>
              <div
                class="metric-card"
                style="
                  background: white;
                  padding: 16px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: var(--orange);
                    margin-bottom: 6px;
                  "
                  id="totalUsers"
                >
                  0
                </div>
                <div style="color: var(--gray); font-size: 13px">
                  Total Users
                </div>
                <div
                  style="
                    color: var(--success-green);
                    font-size: 11px;
                    margin-top: 2px;
                  "
                  id="usersChange"
                ></div>
              </div>
              <div
                class="metric-card"
                style="
                  background: white;
                  padding: 16px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                  text-align: center;
                "
              >
                <div
                  style="
                    font-size: 24px;
                    font-weight: 700;
                    color: var(--primary-green);
                    margin-bottom: 6px;
                  "
                  id="overtimeRate"
                >
                  0%
                </div>
                <div style="color: var(--gray); font-size: 13px">
                  Most Booked Slot
                </div>
                <div
                  style="color: var(--gray); font-size: 11px; margin-top: 2px"
                  id="overtimeChange"
                ></div>
              </div>
            </div>

            <!-- Charts Grid -->
            <div
              class="charts-grid"
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
                margin-bottom: 32px;
              "
            >
              <!-- Revenue Trend Chart -->
              <div
                class="chart-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <h3 style="margin: 0 0 20px 0; color: var(--dark-gray)">
                  Revenue Trend
                </h3>
                <canvas id="revenueChart" width="400" height="200"></canvas>
              </div>

              <!-- Booking Volume Chart -->
              <div
                class="chart-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <h3 style="margin: 0 0 20px 0; color: var(--dark-gray)">
                  Booking Volume
                </h3>
                <canvas
                  id="bookingVolumeChart"
                  width="400"
                  height="200"
                ></canvas>
              </div>
            </div>

            <!-- Additional Charts Row -->
            <div
              class="charts-grid"
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
                margin-bottom: 32px;
              "
            >
              <!-- Peak Hours Chart -->
              <div
                class="chart-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <h3 style="margin: 0 0 20px 0; color: var(--dark-gray)">
                  Peak Hours Analysis
                </h3>
                <canvas id="peakHoursChart" width="400" height="200"></canvas>
              </div>
              <!-- Top Users Chart -->
              <div
                class="chart-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <h3 style="margin: 0 0 20px 0; color: var(--dark-gray)">
                  Top Users by Bookings
                </h3>
                <canvas id="topUsersChart" width="400" height="200"></canvas>
              </div>
            </div>

            <!-- User Analytics Row -->
            <div
              class="charts-grid"
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
                margin-bottom: 32px;
              "
            ></div>

            <!-- Data Tables -->
            <div
              class="tables-grid"
              style="display: grid; grid-template-columns: 1fr; gap: 24px"
            >
              <!-- Users with Negative Balance Table -->
              <div
                class="table-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                  "
                >
                  <h3 style="margin: 0; color: var(--dark-gray)">
                    Users with Negative Balance
                  </h3>
                  <button
                    class="btn btn-sm btn-outline"
                    onclick="dashboard.loadNegativeBalanceUsers()"
                  >
                    <i class="fas fa-sync-alt"></i> Refresh
                  </button>
                </div>
                <div id="negativeBalanceTable" style="overflow-x: auto">
                  <!-- Table will be populated by JavaScript -->
                </div>
              </div>

              <!-- Recent Bookings Table -->
              <div
                class="table-container"
                style="
                  background: white;
                  padding: 24px;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                "
              >
                <h3 style="margin: 0 0 20px 0; color: var(--dark-gray)">
                  Top Users by Bookings
                </h3>
                <div id="topUsersTable" style="overflow-x: auto">
                  <!-- Table will be populated by JavaScript -->
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Other sections will be added dynamically -->
      </main>
    </div>

    <script src="script.js?v=35"></script>
  </body>
</html>
